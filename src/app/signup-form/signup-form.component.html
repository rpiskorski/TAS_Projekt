<!-- TODO Walidacja, stany formularza dirty/touched/etc -->
<div *ngIf="!authService.isAuthenticated();else loggedIn">

<!-- <app-messages *ngIf="messageService.status && messageService.status>=200 && messageService.status<300;else notRegistered">
{{redirect('main')}}
</app-messages> -->
<div *ngIf="!messageService.status || messageService.status==0 || messageService.status>=400;else register">


<!-- <ng-template #notRegistered> -->

	<h1>Zarejestruj się</h1>

	<div  class="container">
		<div class="row">
			<div class="col-sm-4 offset-sm-4">
				<form (ngSubmit)="onSubmit()" #signupForm="ngForm">
				<div class="form-group">

					<div>
					<label for="name">Login</label>
					<input type="text" required [(ngModel)]="model.name" name="name" #name="ngModel" class="form-control">
					</div>

					<div>
					<label for="password">Hasło</label>
					<input type="password" required [(ngModel)]="model.password" name="password" #password="ngModel" class="form-control">
					</div>

					<div>
					<label for="password">Powtórz hasło</label>
					<input type="password" required [(ngModel)]="secondPassword" name="password" #password="ngModel" class="form-control">
					</div>
					<!-- <p class="blad"><div app-messages></div></p> -->
					<div class="blad"><app-messages></app-messages></div>
					<div *ngIf="!passwordCheck()">
					<div class="blad">Hasła nie są sobie równe</div>
					</div>
					<br>
					<button type="submit" [disabled]="!signupForm.form.valid" class="btn btn-primary">Zarejestruj</button>
					</div>
				</form>
			</div>
		</div>
	</div>

<!-- </ng-template> -->

</div>
<ng-template #register>
<!-- <app-messages #registered>
</app-messages> -->
<!-- <h1>{{messageService.message}}</h1> -->
	<!-- {{redirect('main')}} -->
	{{router.navigate(['main'])}};
<!-- <h1>Jesteś zalogowany jako {{authService.getUsername()}}</h1> -->
</ng-template>
</div>

<ng-template #loggedIn>
	<!-- <h1>{{messageService.message}}</h1> -->
		<!-- {{redirect('main')}} -->
			{{router.navigate(['main'])}};
<!-- <h1>Jesteś zalogowany jako {{authService.getUsername()}}</h1> -->
</ng-template>
